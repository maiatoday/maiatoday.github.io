<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='How to build Wrapped 2023 in Compose Animation If I had to build the Spotify Wrapped 2023 animations in Compose, this is how I would do it. This blog post doesn&rsquo;t reproduce the effects identically, but it shows some of the basic Compose animation techniques you could use. It uses Canvas drawing and especially the drawWithCache modifier. It also uses RoundedPolygon, various matrix transformations and looping animation techniques using infiniteRepeatable. There is a section about how to get a path from an svg file as well.
'><title>How to build Wrapped 2023 in Compose Animation</title>
<link rel=canonical href=https://www.maiatoday.net/p/how-to-build-wrapped-2023-in-compose-animation/><link rel=stylesheet href=/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css><meta property='og:title' content='How to build Wrapped 2023 in Compose Animation'><meta property='og:description' content='How to build Wrapped 2023 in Compose Animation If I had to build the Spotify Wrapped 2023 animations in Compose, this is how I would do it. This blog post doesn&rsquo;t reproduce the effects identically, but it shows some of the basic Compose animation techniques you could use. It uses Canvas drawing and especially the drawWithCache modifier. It also uses RoundedPolygon, various matrix transformations and looping animation techniques using infiniteRepeatable. There is a section about how to get a path from an svg file as well.
'><meta property='og:url' content='https://www.maiatoday.net/p/how-to-build-wrapped-2023-in-compose-animation/'><meta property='og:site_name' content='maiatoday'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='code'><meta property='article:tag' content='animate'><meta property='article:tag' content='compose'><meta property='article:published_time' content='2023-12-09T17:18:17+02:00'><meta property='article:modified_time' content='2023-12-09T17:18:17+02:00'><meta property='og:image' content='https://www.maiatoday.net/p/how-to-build-wrapped-2023-in-compose-animation/wrappedBanner.png'><meta name=twitter:site content="@maiatoday"><meta name=twitter:creator content="@maiatoday"><meta name=twitter:title content="How to build Wrapped 2023 in Compose Animation"><meta name=twitter:description content="How to build Wrapped 2023 in Compose Animation If I had to build the Spotify Wrapped 2023 animations in Compose, this is how I would do it. This blog post doesn&rsquo;t reproduce the effects identically, but it shows some of the basic Compose animation techniques you could use. It uses Canvas drawing and especially the drawWithCache modifier. It also uses RoundedPolygon, various matrix transformations and looping animation techniques using infiniteRepeatable. There is a section about how to get a path from an svg file as well.
"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://www.maiatoday.net/p/how-to-build-wrapped-2023-in-compose-animation/wrappedBanner.png'><link rel="shortcut icon" href=favicon/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-1K04GCNEKX"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1K04GCNEKX")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/MaiaGDE-Badge2022_hu2595940041951729151.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üê∂</span></figure><div class=site-meta><h1 class=site-name><a href=/>maiatoday</a></h1><h2 class=site-description>Android dev ‚ù§Ô∏èKotlin üê∂</h2></div></header><ol class=social-menu><li><a href=https://github.com/maiatoday target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://androiddev.social/@maiatoday target=_blank title=Mastodon rel=me><svg width="61.076954mm" height="65.47831mm" viewBox="0 0 216.4144 232.00976"><path fill="#2b90d9" d="M211.80734 139.0875c-3.18125 16.36625-28.4925 34.2775-57.5625 37.74875-15.15875 1.80875-30.08375 3.47125-45.99875 2.74125-26.0275-1.1925-46.565-6.2125-46.565-6.2125.0 2.53375.15625 4.94625.46875 7.2025 3.38375 25.68625 25.47 27.225 46.39125 27.9425 21.11625.7225 39.91875-5.20625 39.91875-5.20625l.8675 19.09s-14.77 7.93125-41.08125 9.39c-14.50875.7975-32.52375-.365-53.50625-5.91875C9.23234 213.82 1.40609 165.31125.20859 116.09125c-.365-14.61375-.14-28.39375-.14-39.91875.0-50.33 32.97625-65.0825 32.97625-65.0825C49.67234 3.45375 78.20359.2425 107.86484.0h.72875c29.66125.2425 58.21125 3.45375 74.8375 11.09.0.0 32.975 14.7525 32.975 65.0825.0.0.41375 37.13375-4.59875 62.915"/><path fill="#fff" d="M177.50984 80.077v60.94125h-24.14375v-59.15c0-12.46875-5.24625-18.7975-15.74-18.7975-11.6025.0-17.4175 7.5075-17.4175 22.3525v32.37625H96.20734V85.42325c0-14.845-5.81625-22.3525-17.41875-22.3525-10.49375.0-15.74 6.32875-15.74 18.7975v59.15H38.90484V80.077c0-12.455 3.17125-22.3525 9.54125-29.675 6.56875-7.3225 15.17125-11.07625 25.85-11.07625 12.355.0 21.71125 4.74875 27.8975 14.2475l6.01375 10.08125 6.015-10.08125c6.185-9.49875 15.54125-14.2475 27.8975-14.2475 10.6775.0 19.28 3.75375 25.85 11.07625 6.36875 7.3225 9.54 17.22 9.54 29.675"/></svg></a></li><li><a href=https://twitter.com/maiatoday target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://www.maiatoday.net/ selected></option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#pick-a-palette>Pick a palette</a></li><li><a href=#shimer-pane---animating-linear-gradient>Shimer pane - animating Linear Gradient</a></li><li><a href=#spiky-splash---rotating-roundedpolygon-with-drawwithcache-modifier>Spiky Splash - rotating RoundedPolygon with drawWithCache modifier</a></li><li><a href=#scribble-drawing---path-matrix-transform-flattened-path>Scribble drawing - path, matrix transform, flattened path</a><ul><li><a href=#how-to-get-a-path-from-svg>How to get a path from svg</a></li><li><a href=#transforming-the-path-with-the-matrix>Transforming the path with the matrix</a></li><li><a href=#drawing-the-path>Drawing the path</a></li><li><a href=#scribble-draw-the-path-with-flattened-lines>Scribble draw the path with flattened lines</a></li></ul></li><li><a href=#combining-everything>Combining everything</a></li><li><a href=#thats-a-wrap>That&rsquo;s a wrap</a></li><li><a href=#whats-next>What&rsquo;s next</a></li><li><a href=#references>References</a></li></ul></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/how-to-build-wrapped-2023-in-compose-animation/><img src=/p/how-to-build-wrapped-2023-in-compose-animation/wrappedBanner_hu17982260433234267248.png srcset="/p/how-to-build-wrapped-2023-in-compose-animation/wrappedBanner_hu17982260433234267248.png 800w, /p/how-to-build-wrapped-2023-in-compose-animation/wrappedBanner_hu10210344768976774333.png 1600w" width=800 height=288 loading=lazy alt="Featured image of post How to build Wrapped 2023 in Compose Animation"></a></div><div class=article-details><header class=article-category><a href=/categories/code/>Code
</a><a href=/categories/sample/>Sample</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/how-to-build-wrapped-2023-in-compose-animation/>How to build Wrapped 2023 in Compose Animation</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Dec 09, 2023</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>7 minute read</time></div></footer></div></header><section class=article-content><h1 id=how-to-build-wrapped-2023-in-compose-animation>How to build Wrapped 2023 in Compose Animation</h1><p>If I had to build the <a class=link href="https://open.spotify.com/wrapped/share/share-991bdbcda37a462bac4c6d6c80b17ef0-1080x1920?lang=en&amp;destination=datastories&amp;si=MDUyMGY4ZTAtYmRmMS00ZjJhLWE3OGItNjFhNzBmMzAwYzBk" target=_blank rel=noopener>Spotify Wrapped 2023</a> animations in Compose, this is how I would do it. This blog post doesn&rsquo;t reproduce the effects identically, but it shows some of the basic Compose animation techniques you could use. It uses <code>Canvas</code> drawing and especially the <code>drawWithCache</code> modifier. It also uses <code>RoundedPolygon</code>, various matrix transformations and looping animation techniques using <code>infiniteRepeatable</code>. There is a section about how to get a path from an svg file as well.</p><p>I created three different techniques. The first is a simple box with an animating linear gradient and an animating offset. The second is a spiky star using a <code>RoundedPolygon</code> with colour stop gradient and some animations in a <code>graphicsLayer</code>. The last is a progressivly drawing line. As a bonus we&rsquo;ll make a palette using <a class=link href=https://unsplash.com/ target=_blank rel=noopener>unsplash.com</a> and <a class=link href=https://coolors.co/palettes/popular target=_blank rel=noopener>coolors.co</a> Let&rsquo;s start with the palette.</p><h2 id=pick-a-palette>Pick a palette</h2><img src=snipUnsplash.png width="{{ .Width }}" height="{{ .Height }}"><p>Pick an image from unsplash and pull some colours from the image. <a class=link href=https://unsplash.com/photos/multicolored-hallway-RnCPiXixooY target=_blank rel=noopener>Here&rsquo;s one</a> I got. I then loaded it into <a class=link href=https://coolors.co/palettes/popular target=_blank rel=noopener>coolors.co</a> and picked some palette colours from the image.</p><p>Here are the colours I picked:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>Pasta</span> <span class=p>=</span> <span class=n>Color</span><span class=p>(</span><span class=m>0xFFE7D6CE</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>OrangeSquash</span> <span class=p>=</span> <span class=n>Color</span><span class=p>(</span><span class=m>0xFFFD9B72</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>Plumberry</span> <span class=p>=</span> <span class=n>Color</span><span class=p>(</span><span class=m>0xFF682084</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>Aubergette</span> <span class=p>=</span> <span class=n>Color</span><span class=p>(</span><span class=m>0xFF421F7B</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>SwimmingCap</span> <span class=p>=</span> <span class=n>Color</span><span class=p>(</span><span class=m>0xFF4FBBA5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>Cherry</span> <span class=p>=</span> <span class=n>Color</span><span class=p>(</span><span class=m>0xFFFC1946</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>Sherbet</span> <span class=p>=</span> <span class=n>Color</span><span class=p>(</span><span class=m>0xFFD33BB9</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>Licorice</span> <span class=p>=</span> <span class=n>Color</span><span class=p>(</span><span class=m>0xFF35192B</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>Custard</span> <span class=p>=</span> <span class=n>Color</span><span class=p>(</span><span class=m>0xFFFEC05D</span><span class=p>)</span>
</span></span></code></pre></div><p>We can now use these everywhere as gradients or backgrounds and our animation will have a consistent look that matches the mood from the image.</p><h2 id=shimer-pane---animating-linear-gradient>Shimer pane - animating Linear Gradient</h2><img src=pane.png style=width:33% width="{{ .Width }}" height="{{ .Height }}"><p>For this sliding box we animate the offset with an <code>infiniteRepeatable</code> and we animate the offset of the <code>LinearGradient</code>. The colors of the gradient are chosen from the colors of our newly created palette. The linear gradient changes colour from corner to corner. By changeing the offset of the gradient it moves the gradient in the shape. If we then animate this offset it will make the colours move across the shape. The second animation is simply an x offset to slide the box in and out. You can look at the complete <a class=link href=https://github.com/maiatoday/turbo-giggle/blob/main/app/src/main/java/net/maiatoday/turbogiggle/ShimmerPane.kt target=_blank rel=noopener>ShimmerPane function</a> in the repo. This linear gradient trick is explained in detail in <a class=link href=https://medium.com/androiddevelopers/brushing-up-on-compose-text-coloring-84d7d70dd8fa target=_blank rel=noopener>this blog post</a>.</p><p>In the code snippet you can see how the linear gradient brush is created in the <code>drawWithCache</code> modifier and then the actual drawing happens in the lambda parameter of the <code>onDrawBehind</code> function.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=n>Spacer</span><span class=p>(</span><span class=n>modifier</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=n>offset</span><span class=p>(</span><span class=m>200.</span><span class=n>dp</span><span class=p>*</span><span class=n>slideIn</span><span class=p>,</span> <span class=m>0.</span><span class=n>dp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=n>drawWithCache</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>brush</span> <span class=p>=</span> <span class=nc>Brush</span><span class=p>.</span><span class=n>linearGradient</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>colors</span> <span class=p>=</span> <span class=n>paneColors</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>start</span> <span class=p>=</span> <span class=n>Offset</span><span class=p>(</span><span class=n>offset</span><span class=p>,</span> <span class=n>offset</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>end</span> <span class=p>=</span> <span class=n>Offset</span><span class=p>(</span><span class=n>offset</span> <span class=p>+</span> <span class=n>deltaPx</span><span class=p>,</span> <span class=n>offset</span> <span class=p>+</span> <span class=n>deltaPx</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>tileMode</span> <span class=p>=</span> <span class=nc>TileMode</span><span class=p>.</span><span class=n>Repeated</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>onDrawBehind</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>drawRect</span><span class=p>(</span><span class=n>brush</span> <span class=p>=</span> <span class=n>brush</span><span class=p>,</span> <span class=n>style</span> <span class=p>=</span> <span class=n>Fill</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h2 id=spiky-splash---rotating-roundedpolygon-with-drawwithcache-modifier>Spiky Splash - rotating RoundedPolygon with drawWithCache modifier</h2><img src=spikyStar.png style=width:33% width="{{ .Width }}" height="{{ .Height }}"><p>The Spiky Splash shape is created with a RoundedPolygon with 14 vertices.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>spikySplash</span> <span class=p>=</span> <span class=nc>RoundedPolygon</span><span class=p>.</span><span class=n>star</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>numVerticesPerRadius</span> <span class=p>=</span> <span class=m>14</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>innerRadius</span> <span class=p>=</span> <span class=m>0.4f</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>innerRounding</span> <span class=p>=</span> <span class=n>CornerRounding</span><span class=p>(</span><span class=n>radius</span> <span class=p>=</span> <span class=m>0.1f</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>The trick with the RoundedPolygon is that it is created in a canonical rectangle that ranges from -1 to 1 both the x and the y axis. To be able to see it we need to transform it. Also the transformation needs to happen using the Android View Matrix, not the Compose matrix. The transformation looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>fun</span> <span class=nf>fromBoundsToView</span><span class=p>(</span>
</span></span><span class=line><span class=cl><span class=n>bounds</span><span class=p>:</span> <span class=n>RectF</span> <span class=p>=</span> <span class=n>RectF</span><span class=p>(-</span><span class=m>1f</span><span class=p>,</span> <span class=p>-</span><span class=m>1f</span><span class=p>,</span> <span class=m>1f</span><span class=p>,</span> <span class=m>1f</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=n>width</span><span class=p>:</span> <span class=n>Float</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=n>height</span><span class=p>:</span> <span class=n>Float</span>
</span></span><span class=line><span class=cl><span class=p>):</span> <span class=n>Matrix</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>originalWidth</span> <span class=p>=</span> <span class=n>bounds</span><span class=p>.</span><span class=n>right</span> <span class=p>-</span> <span class=n>bounds</span><span class=p>.</span><span class=n>left</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>originalHeight</span> <span class=p>=</span> <span class=n>bounds</span><span class=p>.</span><span class=n>bottom</span> <span class=p>-</span> <span class=n>bounds</span><span class=p>.</span><span class=n>top</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>scale</span> <span class=p>=</span> <span class=n>min</span><span class=p>(</span><span class=n>width</span> <span class=p>/</span> <span class=n>originalWidth</span><span class=p>,</span> <span class=n>height</span> <span class=p>/</span> <span class=n>originalHeight</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>newLeft</span> <span class=p>=</span> <span class=n>bounds</span><span class=p>.</span><span class=n>left</span> <span class=p>-</span> <span class=p>(</span><span class=n>width</span> <span class=p>/</span> <span class=n>scale</span> <span class=p>-</span> <span class=n>originalWidth</span><span class=p>)</span> <span class=p>/</span> <span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>newTop</span> <span class=p>=</span> <span class=n>bounds</span><span class=p>.</span><span class=n>top</span> <span class=p>-</span> <span class=p>(</span><span class=n>height</span> <span class=p>/</span> <span class=n>scale</span> <span class=p>-</span> <span class=n>originalHeight</span><span class=p>)</span> <span class=p>/</span> <span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>matrix</span> <span class=p>=</span> <span class=n>Matrix</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>matrix</span><span class=p>.</span><span class=n>setTranslate</span><span class=p>(-</span><span class=n>newLeft</span><span class=p>,</span> <span class=p>-</span><span class=n>newTop</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>matrix</span><span class=p>.</span><span class=n>postScale</span><span class=p>(</span><span class=n>scale</span><span class=p>,</span> <span class=n>scale</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>matrix</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This matrix can be used to transform the RoundedPolygon into the hosting view. When we draw this polygon we need to first transform it with the matrix and then convert it to a compose path. The transformation happens in the <code>drawWithCache</code> modifier so that it is cached.</p><p>Here is just the <code>drawWithCache</code> modifier:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=p>.</span><span class=n>drawWithCache</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>matrix</span> <span class=p>=</span> <span class=n>fromBoundsToView</span><span class=p>(</span><span class=n>width</span> <span class=p>=</span> <span class=n>size</span><span class=p>.</span><span class=n>width</span><span class=p>,</span> <span class=n>height</span> <span class=p>=</span> <span class=n>size</span><span class=p>.</span><span class=n>height</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>sizedSpikySplash</span> <span class=p>=</span> <span class=n>RoundedPolygon</span><span class=p>(</span><span class=n>spikySplash</span><span class=p>).</span><span class=n>apply</span> <span class=p>{</span> <span class=n>transform</span><span class=p>(</span><span class=n>matrix</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>spikyBrush</span> <span class=p>=</span> <span class=nc>Brush</span><span class=p>.</span><span class=n>radialGradient</span><span class=p>(</span><span class=n>colorStops</span> <span class=p>=</span> <span class=n>colorStops</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>onDrawBehind</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>drawPath</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>path</span> <span class=p>=</span> <span class=n>sizedSpikySplash</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>toPath</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>asComposePath</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=n>brush</span> <span class=p>=</span> <span class=n>spikyBrush</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>It is coloured with a radial gradient with stops so that the colours make more distinct bands. Full <a class=link href=https://github.com/maiatoday/turbo-giggle/blob/main/app/src/main/java/net/maiatoday/turbogiggle/SpikySplash.kt target=_blank rel=noopener>spiky splash source here</a></p><p>The animation is pretty standard, <code>infiniteTransition</code> changing then rotation angle.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>spikyTransition</span> <span class=p>=</span> <span class=n>rememberInfiniteTransition</span><span class=p>(</span><span class=n>label</span> <span class=p>=</span> <span class=s2>&#34;spiky transition&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>rotate</span> <span class=k>by</span> <span class=n>spikyTransition</span><span class=p>.</span><span class=n>animateFloat</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>initialValue</span> <span class=p>=</span> <span class=m>45f</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>targetValue</span> <span class=p>=</span> <span class=p>-</span><span class=m>45f</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>animationSpec</span> <span class=p>=</span> <span class=n>infiniteRepeatable</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>animation</span> <span class=p>=</span> <span class=n>tween</span><span class=p>(</span><span class=m>4</span><span class=n>_000</span><span class=p>,</span> <span class=n>easing</span> <span class=p>=</span> <span class=n>FastOutSlowInEasing</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>repeatMode</span> <span class=p>=</span> <span class=nc>RepeatMode</span><span class=p>.</span><span class=n>Reverse</span>
</span></span><span class=line><span class=cl>    <span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>label</span> <span class=p>=</span> <span class=s2>&#34;Spiky rotate &#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>We use the rotation angle in a <code>graphicsLayer</code> modifier because we don&rsquo;t need to redraw the spiky splash, we only need to rotate it. We also change the shape to be more oval in this snippet by scaling it to half the size in the y axis.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=p>.</span><span class=n>graphicsLayer</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>scaleY</span> <span class=p>=</span> <span class=m>0.5f</span>
</span></span><span class=line><span class=cl>  <span class=n>rotationZ</span> <span class=p>=</span> <span class=n>rotate</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=scribble-drawing---path-matrix-transform-flattened-path>Scribble drawing - path, matrix transform, flattened path</h2><h3 id=how-to-get-a-path-from-svg>How to get a path from svg</h3><img src=spikyscribble.svg style=width:33% width="{{ .Width }}" height="{{ .Height }}"><p>Create some scribbles in a package like inkscape or any drawing package that will let you save an svg. Don&rsquo;t make it complicated, literally just draw a line with the pencil. Then open the svg with a text editor. You can <a class=link href=http://maiatoday.net/p/how-to-build-wrapped-2023-in-compose-animation/spikyscribble.svg target=_blank rel=noopener>open</a> the svg displayed here and see what it looks like. You are looking for a line that starts with something like <code>&lt;path style="fill:none;...</code></p><img src=pathInSvg.png style=width:33% width="{{ .Width }}" height="{{ .Height }}"><p>Copy everything in the <code>d="...</code> section as a string and paste it into your code.</p><img src=stringInAndroidStudio.png style=width:33% width="{{ .Width }}" height="{{ .Height }}"><h3 id=transforming-the-path-with-the-matrix>Transforming the path with the matrix</h3><p>The matrix transformation is <a class=link href=https://github.com/maiatoday/turbo-giggle/blob/2849314e0e2fb1e4670e500759c4fe7ff994a87b/app/src/main/java/net/maiatoday/turbogiggle/ScribblePath.kt#L164 target=_blank rel=noopener>very similar</a> to the RoundedPolygon one, but&mldr; we now need the Compose <code>Matrix</code> not the Android view one. Also the bounds of the path are no longer -1,1 for both x and y. We can get the bounds of the path and use it to make a matrix to size the scribble to fit the view.</p><h3 id=drawing-the-path>Drawing the path</h3><p>If we just draw the path as is, it will draw the whole path and not progressively draw it. There is a neat trick as shown in <a class=link href="https://youtu.be/2zVBnJ15C6M?si=GWK1N7W9waBtchKM&amp;t=1884" target=_blank rel=noopener>this video at timestamp 31:36</a>.</p><h3 id=scribble-draw-the-path-with-flattened-lines>Scribble draw the path with flattened lines</h3><p>The clue is we split the whole path up into short sections, little lines, which we draw one after the other. The line of code where this happens is</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>lines</span> <span class=p>=</span> <span class=n>path</span><span class=p>.</span><span class=n>asAndroidPath</span><span class=p>().</span><span class=n>flatten</span><span class=p>(</span><span class=m>0.5f</span><span class=p>)</span>
</span></span></code></pre></div><p>The 0.5f parameter in the flatten call is the error that the flatten call allows, 0.5 is half a pixel. You can also see we need to convert again to an <code>AndroidPath</code> because the <code>flatten</code> method is only available on Android paths. We animate a progress variable so we can loop from say 0% to 10% and so on up to 100% and then start again. Then in the modifier <code>onDrawBehind</code> function lambde we loop through the <code>lines</code> and draw only those lines up to a the progress variable. The animation is caused by only some of the path subsections being drawn and more and more of them being drawn as the progerss increases.</p><img src=scribble.png style=width:33% width="{{ .Width }}" height="{{ .Height }}"><h2 id=combining-everything>Combining everything</h2><img src=giggle.png style=width:33% width="{{ .Width }}" height="{{ .Height }}"><p>Since these different elements are all built in their own composable. We can put them all together remembering that the <code>Composables</code> that are drawn first will be at the bottom.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=nd>@Composable</span>
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>Giggle</span><span class=p>(</span><span class=n>modifier</span><span class=p>:</span> <span class=n>Modifier</span> <span class=p>=</span> <span class=n>Modifier</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Box</span><span class=p>(</span><span class=n>modifier</span><span class=p>.</span><span class=n>background</span><span class=p>(</span><span class=n>Sherbet</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>ShimmerPane</span><span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=n>Modifier</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>height</span><span class=p>(</span><span class=m>280.</span><span class=n>dp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>width</span><span class=p>(</span><span class=m>250.</span><span class=n>dp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>Daisy</span><span class=p>(</span><span class=n>colors</span> <span class=p>=</span> <span class=n>listOf</span><span class=p>(</span><span class=n>SwimmingCap</span><span class=p>,</span> <span class=n>Licorice</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=n>SpikyScribble</span><span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=n>colors</span> <span class=p>=</span> <span class=n>listOf</span><span class=p>(</span><span class=n>Cherry</span><span class=p>,</span> <span class=n>Licorice</span><span class=p>),</span>
</span></span><span class=line><span class=cl>          <span class=n>modifier</span> <span class=p>=</span> <span class=n>Modifier</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>offset</span><span class=p>(-</span><span class=m>150.</span><span class=n>dp</span><span class=p>,</span> <span class=m>400.</span><span class=n>dp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>Bean</span><span class=p>(</span><span class=n>colors</span> <span class=p>=</span> <span class=n>listOf</span><span class=p>(</span><span class=n>Custard</span><span class=p>,</span> <span class=n>OrangeSquash</span><span class=p>),</span>
</span></span><span class=line><span class=cl>          <span class=n>modifier</span> <span class=p>=</span> <span class=n>Modifier</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>fillMaxSize</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>SpikySplash</span><span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=n>Modifier</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>size</span><span class=p>(</span><span class=m>500.</span><span class=n>dp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>offset</span><span class=p>(</span><span class=m>100.</span><span class=n>dp</span><span class=p>,</span> <span class=m>400.</span><span class=n>dp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=thats-a-wrap>That&rsquo;s a wrap</h2><p>Here&rsquo;s <a class=link href=https://github.com/maiatoday/turbo-giggle target=_blank rel=noopener>the repo</a></p><p>and here&rsquo;s the demo</p><video width=25% controls autoplay>
<source src=wrapped.webm type=video/webm>Your browser does not support the video tag.</video><h2 id=whats-next>What&rsquo;s next</h2><p>This experiment is by no means complete. This is what I could try out next:</p><ul><li>Figure out <strong>what is up with the scribble line transform</strong> that makes it sometimes cut off at the bottom</li><li>Make the scribble lines more like the real thing by figuring out how to <strong>make the gradient draw along the line</strong></li><li>Figure out a way to do the <strong>blocky scribble</strong></li><li>Draw some <strong>album art</strong> and add text</li><li>Make a <strong>circular calendar</strong> with a bezier or RoundedPolygon animating graph</li><li>Make <strong>sliding in blinds</strong> effect</li><li><strong>Get real data</strong> from the Spotify API and expand the animations</li></ul><p>But hey, there is always more to learn and explore.</p><p>If you want to get a step by step walkthrough of concepts such as these with some theory discussions and a practise repo, check out my droidcon academy coffee break codelab titled <a class=link href=https://academy.droidcon.com/course/draw-and-animate-on-canvas-with-jetpack-compose-in-android target=_blank rel=noopener>Draw and Animate on Canvas with Jetpack Compose in Android</a></p><h2 id=references>References</h2><p><a class=link href=https://medium.com/androiddevelopers/brushing-up-on-compose-text-coloring-84d7d70dd8fa target=_blank rel=noopener>Alejandra&rsquo;s Medium article on animating linear gradient brush</a></p><p><a class=link href=https://medium.com/androiddevelopers/the-shape-of-things-to-come-1c7663d9dbc0 target=_blank rel=noopener>Chet&rsquo;s article on Rounded Polygons</a></p><p><a class=link href="https://www.youtube.com/watch?v=2zVBnJ15C6M" target=_blank rel=noopener>Rebecca&rsquo;s video on drawing text as a flattened path and more</a></p><p><a class=link href=https://gist.github.com/riggaroo/4c6abc7d29e511831c2ceb68697b913f#gistcomment-4375902 target=_blank rel=noopener>Rebecca&rsquo;s gist for the scribble lines</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/code/>Code</a>
<a href=/tags/animate/>Animate</a>
<a href=/tags/compose/>Compose</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/confetti-cleanup/><div class=article-image><img src=/p/confetti-cleanup/confetti_doge.f986c7861cf2b9155e9e6f8435f76723_hu2564732628287967194.png width=250 height=150 loading=lazy alt="Featured image of post Confetti Cleanup" data-hash="md5-+YbHhhzyuRVenm+ENfdnIw=="></div><div class=article-details><h2 class=article-title>Confetti Cleanup</h2></div></a></article><article class=has-image><a href=/p/welcome-you-are-visitor-number-12345/><div class=article-image><img src=/p/welcome-you-are-visitor-number-12345/visitorCounter.3d2d9bd34ee276e593bfbd8bac20b717_hu12862866933530445159.png width=250 height=150 loading=lazy alt="Featured image of post Welcome you are visitor number 12345" data-hash="md5-PS2b007iduWTv72LrCC3Fw=="></div><div class=article-details><h2 class=article-title>Welcome you are visitor number 12345</h2></div></a></article><article class=has-image><a href=/p/blink-like-its-1999/><div class=article-image><img src=/p/blink-like-its-1999/blinktag.1c48967e8fa7dc5db40905e9a2ad4fb6_hu11936043987626006063.png width=250 height=150 loading=lazy alt="Featured image of post <blink> like it's 1999" data-hash="md5-HEiWfo+n3F20CQXpoq1Ptg=="></div><div class=article-details><h2 class=article-title>&lt;blink> like it's 1999</h2></div></a></article><article class=has-image><a href=/p/animating-rainbow-text/><div class=article-image><img src=/p/animating-rainbow-text/noDisco.556047072255aedff2dfb533e976c0f0_hu3223634588644358732.png width=250 height=150 loading=lazy alt="Featured image of post Animating Rainbow Text" data-hash="md5-VWBHByJVrt/y37Uz6XbA8A=="></div><div class=article-details><h2 class=article-title>Animating Rainbow Text</h2></div></a></article><article class=has-image><a href=/p/random-animating-pie-button/><div class=article-image><img src=/p/random-animating-pie-button/randomPieBanner.29fe95f7221eace9f8cc95d555c09027_hu4485764095054494537.png width=250 height=150 loading=lazy alt="Featured image of post Random Animating Pie Button" data-hash="md5-Kf6V9yIerOn4zJXVVcCQJw=="></div><div class=article-details><h2 class=article-title>Random Animating Pie Button</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2012 -
2024 maiatoday</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>