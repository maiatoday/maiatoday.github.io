<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Once upon a time I admit. I have a penchant for word games and weird segues. So I will tell you what this post is about off the bat. You can skip to the code, I won&rsquo;t be offended. Fleet 1.19 was released this week with an integrated AI assistant. I took it for a spin and used it to convert Kotlin code from imperative style to functional and back again. I used some Kotlin code, which solves the Advent of Code 2022 Day 10 puzzle. I had written the solution in two styles and I had the AI assistant do the same conversion and compared the code. And then I played around and generated some poetry. Follow links at your peril, there are rabbit holes, it might make you late or change the size of your free time.\n"><title>The Imitation Tortoise's song - a fleety conversion from imperative to functional - Will you join the dance?</title><link rel=canonical href=https://www.maiatoday.net/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="The Imitation Tortoise's song - a fleety conversion from imperative to functional - Will you join the dance?"><meta property='og:description' content="Once upon a time I admit. I have a penchant for word games and weird segues. So I will tell you what this post is about off the bat. You can skip to the code, I won&rsquo;t be offended. Fleet 1.19 was released this week with an integrated AI assistant. I took it for a spin and used it to convert Kotlin code from imperative style to functional and back again. I used some Kotlin code, which solves the Advent of Code 2022 Day 10 puzzle. I had written the solution in two styles and I had the AI assistant do the same conversion and compared the code. And then I played around and generated some poetry. Follow links at your peril, there are rabbit holes, it might make you late or change the size of your free time.\n"><meta property='og:url' content='https://www.maiatoday.net/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/'><meta property='og:site_name' content='maiatoday'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='code'><meta property='article:tag' content='kotlin'><meta property='article:tag' content='imperative'><meta property='article:tag' content='functional'><meta property='article:tag' content='ai'><meta property='article:tag' content='fleet'><meta property='article:tag' content='word games'><meta property='article:tag' content='advent of code'><meta property='article:tag' content='doggerel'><meta property='article:published_time' content='2023-06-10T15:12:44+02:00'><meta property='article:modified_time' content='2023-06-10T15:12:44+02:00'><meta property='og:image' content='https://www.maiatoday.net/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/mock_and_me.jpg'><meta name=twitter:site content="@maiatoday"><meta name=twitter:creator content="@maiatoday"><meta name=twitter:title content="The Imitation Tortoise's song - a fleety conversion from imperative to functional - Will you join the dance?"><meta name=twitter:description content="Once upon a time I admit. I have a penchant for word games and weird segues. So I will tell you what this post is about off the bat. You can skip to the code, I won&rsquo;t be offended. Fleet 1.19 was released this week with an integrated AI assistant. I took it for a spin and used it to convert Kotlin code from imperative style to functional and back again. I used some Kotlin code, which solves the Advent of Code 2022 Day 10 puzzle. I had written the solution in two styles and I had the AI assistant do the same conversion and compared the code. And then I played around and generated some poetry. Follow links at your peril, there are rabbit holes, it might make you late or change the size of your free time.\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://www.maiatoday.net/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/mock_and_me.jpg'><link rel="shortcut icon" href=/favicon/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-1K04GCNEKX"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1K04GCNEKX")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/MaiaGrotepassGDE_hu_9552ec3f13621d52.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>maiatoday</a></h1><h2 class=site-description>Android dev ‚ù§Ô∏è Kotlin üê∂</h2></div></header><ol class=menu-social><li><a href=https://github.com/maiatoday target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://androiddev.social/@maiatoday target=_blank title=Mastodon rel=me><svg width="61.076954mm" height="65.47831mm" viewBox="0 0 216.4144 232.00976"><path fill="#2b90d9" d="M211.80734 139.0875c-3.18125 16.36625-28.4925 34.2775-57.5625 37.74875-15.15875 1.80875-30.08375 3.47125-45.99875 2.74125-26.0275-1.1925-46.565-6.2125-46.565-6.2125.0 2.53375.15625 4.94625.46875 7.2025 3.38375 25.68625 25.47 27.225 46.39125 27.9425 21.11625.7225 39.91875-5.20625 39.91875-5.20625l.8675 19.09s-14.77 7.93125-41.08125 9.39c-14.50875.7975-32.52375-.365-53.50625-5.91875C9.23234 213.82 1.40609 165.31125.20859 116.09125c-.365-14.61375-.14-28.39375-.14-39.91875.0-50.33 32.97625-65.0825 32.97625-65.0825C49.67234 3.45375 78.20359.2425 107.86484.0h.72875c29.66125.2425 58.21125 3.45375 74.8375 11.09.0.0 32.975 14.7525 32.975 65.0825.0.0.41375 37.13375-4.59875 62.915"/><path fill="#fff" d="M177.50984 80.077v60.94125h-24.14375v-59.15c0-12.46875-5.24625-18.7975-15.74-18.7975-11.6025.0-17.4175 7.5075-17.4175 22.3525v32.37625H96.20734V85.42325c0-14.845-5.81625-22.3525-17.41875-22.3525-10.49375.0-15.74 6.32875-15.74 18.7975v59.15H38.90484V80.077c0-12.455 3.17125-22.3525 9.54125-29.675 6.56875-7.3225 15.17125-11.07625 25.85-11.07625 12.355.0 21.71125 4.74875 27.8975 14.2475l6.01375 10.08125 6.015-10.08125c6.185-9.49875 15.54125-14.2475 27.8975-14.2475 10.6775.0 19.28 3.75375 25.85 11.07625 6.36875 7.3225 9.54 17.22 9.54 29.675"/></svg></a></li><li><a href=https://twitter.com/maiatoday target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#segue-the-first-of-many>Segue the first of many</a></li><li><a href=#couplets-of-doggerel>Couplets of doggerel</a></li><li><a href=#5-7-5>5-7-5</a></li></ul><ul><li><a href=#imperative-all-the-way---hand-crafted-by-me>Imperative all the way - hand crafted by me</a></li><li><a href=#the-recipe>The recipe</a></li><li><a href=#heres-one-i-prepared-earlier---hand-written-and-functional>Here&rsquo;s one I prepared earlier - hand written and functional</a></li><li><a href=#ai-converts-to-functional>AI converts to functional</a></li><li><a href=#ai-converts-back-to-imperative>AI converts back to imperative</a></li></ul></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/><img src=/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/mock_and_me_hu_1227624ff085fae8.jpg srcset="/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/mock_and_me_hu_1227624ff085fae8.jpg 800w, /p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/mock_and_me_hu_6058089c80306ee.jpg 1600w" width=800 height=513 loading=lazy alt="Featured image of post The Imitation Tortoise's song - a fleety conversion from imperative to functional - Will you join the dance?"></a></div><div class=article-details><header class=article-category><a href=/categories/code/>Code
</a><a href=/categories/kotlin/>Kotlin
</a><a href=/categories/ai/>Ai</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/>The Imitation Tortoise's song - a fleety conversion from imperative to functional - Will you join the dance?</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 10, 2023</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>8 minute read</time></div></footer></div></header><section class=article-content><h1 id=once-upon-a-time>Once upon a time</h1><p><img src=/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/branches.png width=620 height=370 srcset="/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/branches_hu_a78a177fc916d717.png 480w, /p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/branches_hu_98e290a7a784a5f2.png 1024w" loading=lazy alt=branches class=gallery-image data-flex-grow=167 data-flex-basis=402px></p><p>I admit. I have a penchant for word games and weird <a class=link href=https://www.merriam-webster.com/dictionary/segue target=_blank rel=noopener>segues</a>. So I will tell you what this post is about <a class=link href=https://dictionary.cambridge.org/dictionary/english/right-off-the-bat target=_blank rel=noopener>off the bat</a>. You can <a class=link href=#code-starts-here>skip to the code</a>, I won&rsquo;t be offended. <a class=link href=https://blog.jetbrains.com/fleet/2023/06/fleet-1-19-ai-powered-features-and-easier-configuration-for-rust-analyzer-python-interpreters-and-npm/ target=_blank rel=noopener>Fleet 1.19 was released this week</a> with an integrated AI assistant. I took it for a spin and used it to convert Kotlin code from imperative style to functional and back again. I used some Kotlin code, which solves the <a class=link href=https://adventofcode.com/2022/day/10 target=_blank rel=noopener>Advent of Code 2022 Day 10 puzzle</a>. I had written the solution in two styles and I had the AI assistant do the same conversion and compared the code. And then I played around and generated some poetry. Follow links at your peril, there are rabbit holes, it might make you <a class=link href="https://youtu.be/ZOLpCWlsCjw?t=21" target=_blank rel=noopener>late</a> or <a class=link href="https://www.youtube.com/watch?v=pnJM_jC7j_4" target=_blank rel=noopener>change the size</a> of your free time.</p><h2 id=segue-the-first-of-many>Segue the first of many</h2><p>Oh you are still here! You didn&rsquo;t jump to the <a class=link href=#code-starts-here><strong>code starts here</strong></a> section? Why am I doing this? A long time ago, I read a lot of Lewis Caroll, Alice in Wonderland. In one scene Alice talks to the Mock Turtle. He sings a <a class=link href=https://en.wikipedia.org/wiki/The_Mock_Turtle%27s_Song target=_blank rel=noopener>song about sea creatures dancing</a>. When the first language translators appeared on the scene, <a class=link href=https://www.babelfish.com target=_blank rel=noopener>Altavisa babelfish</a> or perhaps it was the <a class=link href=https://en.wikipedia.org/wiki/Google_Translate target=_blank rel=noopener>early Google Translate</a>, I converted passages from Alice in Wonderland to French and then back again to see what the machines could do. The <em>Mock Turtle</em> was transformed into an <em>Imitation Tortoise</em>. In this way the reference to the original <a class=link href=https://en.wikipedia.org/wiki/Mock_turtle_soup target=_blank rel=noopener>mock turtle soup</a> was lost in translation. In a roundabout way I was wondering what would be uncovered or lost if I used the AI assistant for some translations in coding style.</p><h2 id=couplets-of-doggerel>Couplets of doggerel</h2><p>My trusty and non emotional assistant had no opinion on Lewis Caroll but it made this for me. A definition of <strong>functional programming</strong> style in <strong>rhyming couplets</strong>:</p><blockquote><p>Functional programming&rsquo;s way,<br>treats functions as the play.</p><p>Immutable states they use,<br>side effects they refuse.</p><p>Declarative code is their choice,<br>with functions, they rejoice.</p><p>Nested functions map, filter, reduce,<br>a clean, elegant code they produce.</p></blockquote><p>Compare this with the <strong>imperative</strong> version:</p><blockquote><p>Imperative code, step by step,<br>commands the flow, with every rep.</p><p>Variables mutate, tracking state,<br>loops and branches, integrate.</p><p>In sequence order, let it be,<br>line-by-line, instructions see.</p><p>Procedural paths and simple tweaks,<br>It&rsquo;s the classic style, for codes that speak.</p></blockquote><p><a class=link href=https://www.etymonline.com/word/pshaw target=_blank rel=noopener>Pshaw!</a> verbose <a class=link href=https://www.merriam-webster.com/dictionary/doggerel target=_blank rel=noopener>doggerel</a> you respond, ok here&rsquo;s &mldr; a <a class=link href=https://www.readpoetry.com/10-vivid-haikus-to-leave-you-breathless/ target=_blank rel=noopener><strong>haiku</strong></a></p><h2 id=5-7-5>5-7-5</h2><blockquote><p><strong>Functional</strong></p><p>Functions pure, combined, (5)<br>Immutable state and grace, (7)<br>Elegance defined. (5)</p></blockquote><blockquote><p><strong>Imperative</strong></p><p>Commands in sequence, (5)<br>Changing state and execution, (8! or is it 7?)<br>Steps guide its progress. (5)</p></blockquote><h1 id=code-starts-here>Code starts here</h1><h2 id=imperative-all-the-way---hand-crafted-by-me>Imperative all the way - hand crafted by me</h2><p><a class=link href=https://github.com/maiatoday/imp-fun/blob/imperativeByMe/src/main/kotlin/Main.kt target=_blank rel=noopener>Here</a> is my initial hand written imperative solution to the AoC 2022 Day 10 CRT problem. There are many <a class=link href=https://github.com/elizarov/AdventOfCode2022/commit/9353b60158a9690c8517acd40fefe29ccee7f0bd target=_blank rel=noopener>succinct</a> and <a class=link href=https://todd.ginsberg.com/post/advent-of-code/2021/day10/ target=_blank rel=noopener>elegant</a> <a class=link href=https://github.com/topics/aoc-2022-in-kotlin target=_blank rel=noopener>solutions</a> by other people out there. For this exploration, the changing shape of the code is what interests me. Also to know if the solution is good it needs to have the same output on my input set.
<img src=/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/elplzgzl.png width=1098 height=364 srcset="/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/elplzgzl_hu_b1c29f8e8663ec09.png 480w, /p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/elplzgzl_hu_f15275dacead0aae.png 1024w" loading=lazy alt=ELPLZGZL class=gallery-image data-flex-grow=301 data-flex-basis=723px></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>import</span> <span class=nn>java.io.File</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>main</span><span class=p>(</span><span class=n>args</span><span class=p>:</span> <span class=n>Array</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>crtW</span> <span class=p>=</span> <span class=m>40</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>crtH</span> <span class=p>=</span> <span class=m>6</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>data</span> <span class=k>class</span> <span class=nc>Instruction</span><span class=p>(</span><span class=k>val</span> <span class=py>ticks</span><span class=p>:</span> <span class=n>Int</span> <span class=p>=</span> <span class=m>1</span><span class=p>,</span> <span class=k>val</span> <span class=py>inc</span><span class=p>:</span> <span class=n>Int</span> <span class=p>=</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>crtDisplay</span><span class=p>(</span><span class=n>input</span><span class=p>:</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>instructions</span><span class=p>:</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>Instruction</span><span class=p>&gt;</span> <span class=p>=</span> <span class=n>buildList</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// transform a list of Strings to a list of Instructions
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>for</span> <span class=p>(</span><span class=n>s</span> <span class=k>in</span> <span class=n>input</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// transform String to Instruction
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>val</span> <span class=py>opcode</span> <span class=p>=</span> <span class=n>s</span><span class=p>.</span><span class=n>substringBefore</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>val</span> <span class=py>instruction</span> <span class=p>=</span> <span class=k>when</span> <span class=p>(</span><span class=n>opcode</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;noop&#34;</span> <span class=o>-&gt;</span> <span class=n>Instruction</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;addx&#34;</span> <span class=o>-&gt;</span> <span class=n>Instruction</span><span class=p>(</span><span class=n>ticks</span> <span class=p>=</span> <span class=m>2</span><span class=p>,</span> <span class=n>inc</span> <span class=p>=</span> <span class=n>s</span><span class=p>.</span><span class=n>substringAfter</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>).</span><span class=n>toInt</span><span class=p>())</span>
</span></span><span class=line><span class=cl>                    <span class=k>else</span> <span class=o>-&gt;</span> <span class=n>error</span><span class=p>(</span><span class=s2>&#34;oops&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=n>instruction</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>xRegisterAtTick</span><span class=p>:</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>Int</span><span class=p>&gt;</span> <span class=p>=</span> <span class=n>buildList</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// transform instructions to x register values
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>var</span> <span class=py>x</span> <span class=p>=</span> <span class=m>1</span> <span class=c1>// needs a running x register value
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=k>in</span> <span class=n>instructions</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>repeat</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>ticks</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>this</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=n>x</span> <span class=o>+=</span> <span class=n>i</span><span class=p>.</span><span class=n>inc</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=k>in</span> <span class=m>0</span> <span class=n>until</span> <span class=p>(</span><span class=n>crtW</span> <span class=p>*</span> <span class=n>crtH</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// transform xRegister values to pixels(String)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// chop up in lines
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// side effect: print pixels
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>mod</span><span class=p>(</span><span class=n>crtW</span><span class=p>)</span> <span class=o>==</span> <span class=m>0</span><span class=p>)</span> <span class=n>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span> <span class=c1>//&lt;============  side effect                                                    
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>print</span><span class=p>(</span><span class=k>if</span> <span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>mod</span><span class=p>(</span><span class=n>crtW</span><span class=p>)</span> <span class=k>in</span> <span class=n>xRegisterAtTick</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=p>-</span> <span class=m>1.</span><span class=p>.</span><span class=n>xRegisterAtTick</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=p>+</span> <span class=m>1</span><span class=p>)</span> <span class=s2>&#34;üî¥&#34;</span> <span class=k>else</span> <span class=s2>&#34;‚ö´Ô∏è&#34;</span><span class=p>)</span> <span class=c1>//&lt;============  side effect
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>testInput</span> <span class=p>=</span> <span class=n>readInput</span><span class=p>(</span><span class=s2>&#34;Day_test&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34; ============== test input =============&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>crtDisplay</span><span class=p>(</span><span class=n>testInput</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34;============== real input ==============&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>input</span> <span class=p>=</span> <span class=n>readInput</span><span class=p>(</span><span class=s2>&#34;Day&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>crtDisplay</span><span class=p>(</span><span class=n>input</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>readInput</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=p>=</span> <span class=n>File</span><span class=p>(</span><span class=s2>&#34;src/main/resources/&#34;</span><span class=p>,</span> <span class=s2>&#34;</span><span class=si>$name</span><span class=s2>.txt&#34;</span><span class=p>).</span><span class=n>readLines</span><span class=p>()</span>
</span></span></code></pre></div><h2 id=the-recipe>The recipe</h2><p>You can see my conversion steps in the git repo. The recipe is:<br><strong>Ingredients:</strong></p><ul><li>1 problem</li><li>1 working imperative solution</li><li>tests to taste</li></ul><p><strong>Method:</strong></p><ol><li><em>Separate</em> the variables that <strong>change</strong> from the code that does something.</li><li><em>Separate</em> the <strong>side effect</strong> code from the code that does something.</li><li><em>Chop</em> the doing code, identified in the previous steps, into bite sized chunks and wrap in small <strong>pure functions</strong>.</li><li><em>Replace loops</em> with composed calls such as <em>map</em>, <em>filter</em>, <em>reduce</em> calling the pure functions as higher order functions as needed to obtain the same result as the original.</li></ol><p><strong>Build</strong> gently for a few seconds in a preheated <strong>gradle</strong> command, until <strong>BUILD SUCCESSFUL</strong> and serve immediately.</p><p>Of course this recipe is an over simplification and build times may vary depending on how big the code is and if you are doing this on a <a class=link href="https://forums.raspberrypi.com/viewtopic.php?t=183665" target=_blank rel=noopener>Rasberry PI model B</a>.</p><h2 id=heres-one-i-prepared-earlier---hand-written-and-functional>Here&rsquo;s one I prepared earlier - hand written and functional</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>import</span> <span class=nn>java.io.File</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>main</span><span class=p>(</span><span class=n>args</span><span class=p>:</span> <span class=n>Array</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>crtW</span> <span class=p>=</span> <span class=m>40</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>data</span> <span class=k>class</span> <span class=nc>Instruction</span><span class=p>(</span><span class=k>val</span> <span class=py>ticks</span><span class=p>:</span> <span class=n>Int</span> <span class=p>=</span> <span class=m>1</span><span class=p>,</span> <span class=k>val</span> <span class=py>inc</span><span class=p>:</span> <span class=n>Int</span> <span class=p>=</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>String</span><span class=p>.</span><span class=n>toInstruction</span><span class=p>()</span> <span class=p>=</span> <span class=k>when</span> <span class=p>(</span><span class=n>substringBefore</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;noop&#34;</span> <span class=o>-&gt;</span> <span class=n>Instruction</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;addx&#34;</span> <span class=o>-&gt;</span> <span class=n>Instruction</span><span class=p>(</span><span class=n>ticks</span> <span class=p>=</span> <span class=m>2</span><span class=p>,</span> <span class=n>inc</span> <span class=p>=</span> <span class=n>substringAfter</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>).</span><span class=n>toInt</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=o>-&gt;</span> <span class=n>error</span><span class=p>(</span><span class=s2>&#34;oops&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>Instruction</span><span class=p>.</span><span class=n>expandInstruction</span><span class=p>():</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>Int</span><span class=p>&gt;</span> <span class=p>=</span>
</span></span><span class=line><span class=cl>        <span class=n>buildList</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>repeat</span><span class=p>(</span><span class=k>this</span><span class=nd>@expandInstruction</span><span class=p>.</span><span class=n>ticks</span> <span class=p>-</span> <span class=m>1</span><span class=p>)</span> <span class=p>{</span> <span class=k>this</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=m>0</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=k>this</span><span class=nd>@expandInstruction</span><span class=p>.</span><span class=n>inc</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>Int</span><span class=p>.</span><span class=n>toPixel</span><span class=p>(</span><span class=n>index</span><span class=p>:</span> <span class=n>Int</span><span class=p>,</span> <span class=n>width</span><span class=p>:</span> <span class=n>Int</span> <span class=p>=</span> <span class=n>crtW</span><span class=p>):</span> <span class=n>String</span> <span class=p>=</span> <span class=k>if</span> <span class=p>(</span><span class=n>index</span> <span class=p>%</span> <span class=n>width</span> <span class=k>in</span> <span class=k>this</span> <span class=p>-</span> <span class=m>1.</span><span class=p>.</span><span class=k>this</span> <span class=p>+</span> <span class=m>1</span><span class=p>)</span> <span class=s2>&#34;üî¥&#34;</span> <span class=k>else</span> <span class=s2>&#34;‚ö´Ô∏è&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>crtScan</span><span class=p>(</span><span class=n>input</span><span class=p>:</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;,</span>  <span class=n>width</span><span class=p>:</span> <span class=n>Int</span> <span class=p>=</span> <span class=n>crtW</span><span class=p>):</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;</span> <span class=p>=</span>
</span></span><span class=line><span class=cl>            <span class=n>input</span><span class=p>.</span><span class=n>map</span> <span class=p>{</span> <span class=k>it</span><span class=p>.</span><span class=n>toInstruction</span><span class=p>()</span> <span class=p>}</span><span class=c1>// converts input to instruction
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>.</span><span class=n>flatMap</span> <span class=p>{</span> <span class=n>i</span> <span class=o>-&gt;</span> <span class=n>i</span><span class=p>.</span><span class=n>expandInstruction</span><span class=p>()</span> <span class=p>}</span> <span class=c1>// expands multi tick instructions
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>.</span><span class=n>runningFold</span><span class=p>(</span><span class=m>1</span><span class=p>)</span> <span class=p>{</span> <span class=n>x</span><span class=p>,</span> <span class=n>i</span> <span class=o>-&gt;</span> <span class=n>x</span> <span class=p>+</span> <span class=n>i</span> <span class=p>}</span> <span class=c1>// runs through the instructions accumulating x
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>.</span><span class=n>mapIndexed</span> <span class=p>{</span> <span class=n>index</span><span class=p>,</span> <span class=n>x</span> <span class=o>-&gt;</span> <span class=n>x</span><span class=p>.</span><span class=n>toPixel</span><span class=p>(</span><span class=n>index</span><span class=p>)</span> <span class=p>}</span> <span class=c1>// converts index and x register to a pixel
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>.</span><span class=n>chunked</span><span class=p>(</span><span class=n>width</span><span class=p>).</span><span class=n>map</span> <span class=p>{</span> <span class=k>it</span><span class=p>.</span><span class=n>joinToString</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>)</span> <span class=p>}</span> <span class=c1>// spilt into lines for the screen
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>List</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;.</span><span class=n>display</span><span class=p>()</span> <span class=p>{</span> <span class=c1>// side effect method
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=n>forEach</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=n>println</span><span class=p>(</span><span class=k>it</span><span class=p>)</span>
</span></span><span class=line><span class=cl>           <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>testInput</span> <span class=p>=</span> <span class=n>readInput</span><span class=p>(</span><span class=s2>&#34;Day_test&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34; ============== test input =============&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>crtScan</span><span class=p>(</span><span class=n>testInput</span><span class=p>).</span><span class=n>display</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34;============== real input ==============&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>input</span> <span class=p>=</span> <span class=n>readInput</span><span class=p>(</span><span class=s2>&#34;Day&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>crtScan</span><span class=p>(</span><span class=n>input</span><span class=p>).</span><span class=n>display</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=k>fun</span> <span class=nf>readInput</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=p>=</span> <span class=n>File</span><span class=p>(</span><span class=s2>&#34;src/main/resources/&#34;</span><span class=p>,</span> <span class=s2>&#34;</span><span class=si>$name</span><span class=s2>.txt&#34;</span><span class=p>).</span><span class=n>readLines</span><span class=p>()</span>
</span></span></code></pre></div><h2 id=ai-converts-to-functional>AI converts to functional</h2><p>AI Assistant converts my imperative version to functional</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=n>mport</span> <span class=n>java</span><span class=p>.</span><span class=n>io</span><span class=p>.</span><span class=n>File</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>main</span><span class=p>(</span><span class=n>args</span><span class=p>:</span> <span class=n>Array</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>crtW</span> <span class=p>=</span> <span class=m>40</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>crtH</span> <span class=p>=</span> <span class=m>6</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>data</span> <span class=k>class</span> <span class=nc>Instruction</span><span class=p>(</span><span class=k>val</span> <span class=py>ticks</span><span class=p>:</span> <span class=n>Int</span> <span class=p>=</span> <span class=m>1</span><span class=p>,</span> <span class=k>val</span> <span class=py>inc</span><span class=p>:</span> <span class=n>Int</span> <span class=p>=</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>parseInstruction</span><span class=p>(</span><span class=n>s</span><span class=p>:</span> <span class=n>String</span><span class=p>):</span> <span class=n>Instruction</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>opcode</span> <span class=p>=</span> <span class=n>s</span><span class=p>.</span><span class=n>substringBefore</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>when</span> <span class=p>(</span><span class=n>opcode</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;noop&#34;</span> <span class=o>-&gt;</span> <span class=n>Instruction</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;addx&#34;</span> <span class=o>-&gt;</span> <span class=n>Instruction</span><span class=p>(</span><span class=n>ticks</span> <span class=p>=</span> <span class=m>2</span><span class=p>,</span> <span class=n>inc</span> <span class=p>=</span> <span class=n>s</span><span class=p>.</span><span class=n>substringAfter</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>).</span><span class=n>toInt</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span> <span class=o>-&gt;</span> <span class=n>error</span><span class=p>(</span><span class=s2>&#34;oops&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>buildXRegisterAtTick</span><span class=p>(</span><span class=n>instructions</span><span class=p>:</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>Instruction</span><span class=p>&gt;):</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>Int</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>var</span> <span class=py>x</span> <span class=p>=</span> <span class=m>1</span> <span class=c1>// needs a running x register value
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=n>instructions</span><span class=p>.</span><span class=n>flatMap</span> <span class=p>{</span> <span class=n>instruction</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=n>List</span><span class=p>(</span><span class=n>instruction</span><span class=p>.</span><span class=n>ticks</span><span class=p>)</span> <span class=p>{</span> <span class=n>x</span> <span class=p>}.</span><span class=n>apply</span> <span class=p>{</span> <span class=n>x</span> <span class=o>+=</span> <span class=n>instruction</span><span class=p>.</span><span class=n>inc</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=p>+</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>printCRT</span><span class=p>(</span><span class=n>input</span><span class=p>:</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>instructions</span> <span class=p>=</span> <span class=n>input</span><span class=p>.</span><span class=n>map</span><span class=p>(</span><span class=o>::</span><span class=n>parseInstruction</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>xRegisterAtTick</span> <span class=p>=</span> <span class=n>buildXRegisterAtTick</span><span class=p>(</span><span class=n>instructions</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>crtRows</span> <span class=p>=</span> <span class=p>(</span><span class=n>crtW</span> <span class=p>*</span> <span class=n>crtH</span> <span class=n>until</span> <span class=m>0</span> <span class=n>step</span> <span class=p>-</span><span class=n>crtW</span><span class=p>).</span><span class=n>reversed</span><span class=p>().</span><span class=n>map</span> <span class=p>{</span> <span class=n>lineStart</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=n>lineStart</span> <span class=n>until</span> <span class=n>lineStart</span> <span class=p>+</span> <span class=n>crtW</span><span class=p>).</span><span class=n>joinToString</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>)</span> <span class=p>{</span> <span class=n>i</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=p>%</span> <span class=n>crtW</span> <span class=k>in</span> <span class=n>xRegisterAtTick</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=p>-</span> <span class=m>1.</span><span class=p>.</span><span class=n>xRegisterAtTick</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=p>+</span> <span class=m>1</span><span class=p>)</span> <span class=s2>&#34;üî¥&#34;</span> <span class=k>else</span> <span class=s2>&#34;‚ö´Ô∏è&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>println</span><span class=p>(</span><span class=n>crtRows</span><span class=p>.</span><span class=n>joinToString</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>testInput</span> <span class=p>=</span> <span class=n>readInput</span><span class=p>(</span><span class=s2>&#34;Day_test&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34; ============== test input =============&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>printCRT</span><span class=p>(</span><span class=n>testInput</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34;============== real input ==============&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>input</span> <span class=p>=</span> <span class=n>readInput</span><span class=p>(</span><span class=s2>&#34;Day&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>printCRT</span><span class=p>(</span><span class=n>input</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>readInput</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=p>=</span> <span class=n>File</span><span class=p>(</span><span class=s2>&#34;src/main/resources/&#34;</span><span class=p>,</span> <span class=s2>&#34;</span><span class=si>$name</span><span class=s2>.txt&#34;</span><span class=p>).</span><span class=n>readLines</span><span class=p>()</span>
</span></span></code></pre></div><p>Oh dear, this doesn&rsquo;t work!
<img src=/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/oops.png width=1596 height=308 srcset="/p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/oops_hu_923651f08faab03.png 480w, /p/the-imitation-tortoises-song-a-fleety-conversion-from-imperative-to-functional-will-you-join-the-dance/oops_hu_b65775cf705f735e.png 1024w" loading=lazy alt=Oops class=gallery-image data-flex-grow=518 data-flex-basis=1243px>
Some issue with the loop not using a downTo and getting the ranges wrong. I like the separate functions but it is mixing in some side effects.</p><h2 id=ai-converts-back-to-imperative>AI converts back to imperative</h2><p>AI assistant converts my functional version to imperative</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>import</span> <span class=nn>java.io.File</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>main</span><span class=p>(</span><span class=n>args</span><span class=p>:</span> <span class=n>Array</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>crtW</span> <span class=p>=</span> <span class=m>40</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>crtH</span> <span class=p>=</span> <span class=m>6</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>data</span> <span class=k>class</span> <span class=nc>Instruction</span><span class=p>(</span><span class=k>val</span> <span class=py>ticks</span><span class=p>:</span> <span class=n>Int</span> <span class=p>=</span> <span class=m>1</span><span class=p>,</span> <span class=k>val</span> <span class=py>inc</span><span class=p>:</span> <span class=n>Int</span> <span class=p>=</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>parseInstruction</span><span class=p>(</span><span class=n>s</span><span class=p>:</span> <span class=n>String</span><span class=p>):</span> <span class=n>Instruction</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>opcode</span> <span class=p>=</span> <span class=n>s</span><span class=p>.</span><span class=n>substringBefore</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>when</span> <span class=p>(</span><span class=n>opcode</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;noop&#34;</span> <span class=o>-&gt;</span> <span class=n>Instruction</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;addx&#34;</span> <span class=o>-&gt;</span> <span class=n>Instruction</span><span class=p>(</span><span class=n>ticks</span> <span class=p>=</span> <span class=m>2</span><span class=p>,</span> <span class=n>inc</span> <span class=p>=</span> <span class=n>s</span><span class=p>.</span><span class=n>substringAfter</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>).</span><span class=n>toInt</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span> <span class=o>-&gt;</span> <span class=n>error</span><span class=p>(</span><span class=s2>&#34;oops&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>buildXRegisterAtTick</span><span class=p>(</span><span class=n>instructions</span><span class=p>:</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>Instruction</span><span class=p>&gt;):</span> <span class=n>MutableList</span><span class=p>&lt;</span><span class=n>Int</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>xRegisterAtTick</span> <span class=p>=</span> <span class=n>mutableListOf</span><span class=p>&lt;</span><span class=n>Int</span><span class=p>&gt;()</span>
</span></span><span class=line><span class=cl>        <span class=k>var</span> <span class=py>x</span> <span class=p>=</span> <span class=m>1</span> <span class=c1>// needs a running x register value
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=p>(</span><span class=n>instruction</span> <span class=k>in</span> <span class=n>instructions</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=k>in</span> <span class=m>0</span> <span class=n>until</span> <span class=n>instruction</span><span class=p>.</span><span class=n>ticks</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>xRegisterAtTick</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=o>+=</span> <span class=n>instruction</span><span class=p>.</span><span class=n>inc</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>xRegisterAtTick</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>xRegisterAtTick</span>
</span></span><span class=line><span class=cl>     <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>printCRT</span><span class=p>(</span><span class=n>input</span><span class=p>:</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>instructions</span><span class=p>:</span> <span class=n>MutableList</span><span class=p>&lt;</span><span class=n>Instruction</span><span class=p>&gt;</span> <span class=p>=</span> <span class=n>mutableListOf</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=n>s</span> <span class=k>in</span> <span class=n>input</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>instructions</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=n>parseInstruction</span><span class=p>(</span><span class=n>s</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>xRegisterAtTick</span> <span class=p>=</span> <span class=n>buildXRegisterAtTick</span><span class=p>(</span><span class=n>instructions</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=k>in</span> <span class=m>0</span> <span class=n>until</span> <span class=p>(</span><span class=n>crtW</span> <span class=p>*</span> <span class=n>crtH</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=p>%</span> <span class=n>crtW</span> <span class=o>==</span> <span class=m>0</span><span class=p>)</span> <span class=n>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=p>%</span> <span class=n>crtW</span> <span class=k>in</span> <span class=n>xRegisterAtTick</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=p>-</span> <span class=m>1.</span><span class=p>.</span><span class=n>xRegisterAtTick</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=p>+</span> <span class=m>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>print</span><span class=p>(</span><span class=s2>&#34;üî¥&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>print</span><span class=p>(</span><span class=s2>&#34;‚ö´Ô∏è&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>     <span class=k>val</span> <span class=py>testInput</span> <span class=p>=</span> <span class=n>readInput</span><span class=p>(</span><span class=s2>&#34;Day_test&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=n>println</span><span class=p>(</span><span class=s2>&#34; ============== test input =============&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=n>printCRT</span><span class=p>(</span><span class=n>testInput</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=n>println</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=n>println</span><span class=p>(</span><span class=s2>&#34;============== real input ==============&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=k>val</span> <span class=py>input</span> <span class=p>=</span> <span class=n>readInput</span><span class=p>(</span><span class=s2>&#34;Day&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=n>printCRT</span><span class=p>(</span><span class=n>input</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=n>println</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>readInput</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=p>=</span> <span class=n>File</span><span class=p>(</span><span class=s2>&#34;src/main/resources/&#34;</span><span class=p>,</span> <span class=s2>&#34;</span><span class=si>$name</span><span class=s2>.txt&#34;</span><span class=p>).</span><span class=n>readLines</span><span class=p>()</span>
</span></span></code></pre></div><h1 id=the-end>The end</h1><p>To close I leave you with a <a class=link href=https://github.com/maiatoday/imp-fun/branches target=_blank rel=noopener>git repo</a> and these lines of sage advice in doggerel format from the AI assistant. What can I say, I am amused!</p><blockquote><p>Functional&rsquo;s not a cure-all,<br>For some problems, it may stall.</p><p>Yet, grasp its ways, and you&rsquo;ll see,<br>Cleaner code and clarity.</p><p>Incorporate with grace and skill,<br>More maintainable code, you&rsquo;ll build.</p></blockquote><p>And as a bonus here&rsquo;s the prompt that generated this gem.</p><pre tabindex=0><code>Take the coding advice in quotes and convert it to rhyming couplets
&#34;Keep in mind that functional programming may not always be the best choice
for every problem or coding style, but understanding and
incorporating functional concepts can help create cleaner, more maintainable code.&#34;
</code></pre></section><footer class=article-footer><section class=article-tags><a href=/tags/code/>Code</a>
<a href=/tags/kotlin/>Kotlin</a>
<a href=/tags/imperative/>Imperative</a>
<a href=/tags/functional/>Functional</a>
<a href=/tags/ai/>Ai</a>
<a href=/tags/fleet/>Fleet</a>
<a href=/tags/word-games/>Word Games</a>
<a href=/tags/advent-of-code/>Advent of Code</a>
<a href=/tags/doggerel/>Doggerel</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/50-ways-to-run-some-kotlin-code/><div class=article-image><img src=/p/50-ways-to-run-some-kotlin-code/runKodee.671050b3460e7f2bf3aea491b88bfd02_hu_c040091415ed8588.png width=250 height=150 loading=lazy alt="Featured image of post 50 ways to run some Kotlin code" data-hash="md5-ZxBQs0YOfyvzrqSRuIv9Ag=="></div><div class=article-details><h2 class=article-title>50 ways to run some Kotlin code</h2></div></a></article><article class=has-image><a href=/p/is-it-vaporwave-compose-hot-reload/><div class=article-image><img src=/p/is-it-vaporwave-compose-hot-reload/vapor.2bcfedde99bb8a7c70b55ee133b880b3_hu_6b95bf4376ee302c.png width=250 height=150 loading=lazy alt="Featured image of post Is it vaporwave? - Compose Hot reload" data-hash="md5-K8/t3pm7inxwtV7hM7iAsw=="></div><div class=article-details><h2 class=article-title>Is it vaporwave? - Compose Hot reload</h2></div></a></article><article class=has-image><a href=/p/vibecoding-a-totoro-tribute-with-junie/><div class=article-image><img src=/p/vibecoding-a-totoro-tribute-with-junie/topTotoro.446e2570772fcaf87b70d978a70d7e26_hu_fee6489f9579befe.png width=250 height=150 loading=lazy alt="Featured image of post Vibecoding a Totoro tribute with Junie" data-hash="md5-RG4lcHcvyvh7cNl4pw1+Jg=="></div><div class=article-details><h2 class=article-title>Vibecoding a Totoro tribute with Junie</h2></div></a></article><article class=has-image><a href=/p/how-to-build-wrapped-2023-in-compose-animation/><div class=article-image><img src=/p/how-to-build-wrapped-2023-in-compose-animation/wrappedBanner.6198da8b0d007412374d06fe489b8c62_hu_2bea161c429846f1.png width=250 height=150 loading=lazy alt="Featured image of post How to build Wrapped 2023 in Compose Animation" data-hash="md5-YZjaiw0AdBI3TQb+SJuMYg=="></div><div class=article-details><h2 class=article-title>How to build Wrapped 2023 in Compose Animation</h2></div></a></article><article class=has-image><a href=/p/i-still-see-livedata-where-are-the-flows/><div class=article-image><img src=/p/i-still-see-livedata-where-are-the-flows/hammer.cfe51cb7dc98d06cc564bcaf7092ebdc_hu_62fdba8d8b3f7753.png width=250 height=150 loading=lazy alt="Featured image of post I still see LiveData - where are the Flows?" data-hash="md5-z+Uct9yY0GzFZLyvcJLr3A=="></div><div class=article-details><h2 class=article-title>I still see LiveData - where are the Flows?</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2012 -
2025 maiatoday</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.27.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>