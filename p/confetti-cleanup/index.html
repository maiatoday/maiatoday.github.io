<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In my exploration of animation in Jetpack Compose I built a Confetti modifier that could be applied to any composable. I first showed the modifier in my presentation for Chicago Roboto but since I made it something was bothering me. The way that I can get the state in Compose to register change is by making copies of objects or making new objects. For a modifier that uses particles this can be many objects."><title>Confetti Cleanup</title><link rel=canonical href=https://maiatoday.github.io/p/confetti-cleanup/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Confetti Cleanup"><meta property="og:description" content="In my exploration of animation in Jetpack Compose I built a Confetti modifier that could be applied to any composable. I first showed the modifier in my presentation for Chicago Roboto but since I made it something was bothering me. The way that I can get the state in Compose to register change is by making copies of objects or making new objects. For a modifier that uses particles this can be many objects."><meta property="og:url" content="https://maiatoday.github.io/p/confetti-cleanup/"><meta property="og:site_name" content="maiatoday"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="code"><meta property="article:tag" content="compose"><meta property="article:tag" content="animate"><meta property="article:published_time" content="2021-12-31T07:37:42+02:00"><meta property="article:modified_time" content="2021-12-31T07:37:42+02:00"><meta property="og:image" content="https://maiatoday.github.io/p/confetti-cleanup/confetti_doge.png"><meta name=twitter:site content="@maiatoday"><meta name=twitter:creator content="@maiatoday"><meta name=twitter:title content="Confetti Cleanup"><meta name=twitter:description content="In my exploration of animation in Jetpack Compose I built a Confetti modifier that could be applied to any composable. I first showed the modifier in my presentation for Chicago Roboto but since I made it something was bothering me. The way that I can get the state in Compose to register change is by making copies of objects or making new objects. For a modifier that uses particles this can be many objects."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://maiatoday.github.io/p/confetti-cleanup/confetti_doge.png"><link rel="shortcut icon" href=assets/favicon><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-26841056-1","auto"),ga("send","pageview"))</script></head><body><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended article-page with-toolbar hide-sidebar-sm"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=/img/maiaSquare_hu1362d4a75947cef5a07d81758df5613b_195332_300x0_resize_q75_box.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>üê∂</span></figure><h1 class=site-name><a href=https://maiatoday.github.io>maiatoday</a></h1><h2 class=site-description>Android dev ‚ù§Ô∏èKotlin üê∂</h2></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></ol></aside><main class="main full-width"><div id=article-toolbar><a href=https://maiatoday.github.io class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/confetti-cleanup/><img src=/p/confetti-cleanup/confetti_doge_hua96701f229dcdbb6d8818d2e1e5ed2c2_156508_800x0_resize_box_3.png srcset="/p/confetti-cleanup/confetti_doge_hua96701f229dcdbb6d8818d2e1e5ed2c2_156508_800x0_resize_box_3.png 800w, /p/confetti-cleanup/confetti_doge_hua96701f229dcdbb6d8818d2e1e5ed2c2_156508_1600x0_resize_box_3.png 1600w" width=800 height=578 loading=lazy alt="Featured image of post Confetti Cleanup"></a></div><div class=article-details><header class=article-category><a href=/categories/code/>code</a>
<a href=/categories/sample/>sample</a></header><h2 class=article-title><a href=/p/confetti-cleanup/>Confetti Cleanup</a></h2><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>Dec 31, 2021</time></footer></div></header><section class=article-content><p>In my exploration of animation in Jetpack Compose I built a Confetti modifier that could be applied to any composable. I first showed the modifier in my <a class=link href="https://vimeo.com/627636211?embedded=true&source=video_title&owner=18175981" target=_blank rel=noopener>presentation for Chicago Roboto</a> but since I made it something was bothering me. The way that I can get the state in Compose to register change is by making copies of objects or making new objects. For a modifier that uses particles this can be many objects.</p><p>I profiled my original modifier and sure enough I see the object allocation and also the garbage collectore cleaning up when the confetti modifier is visible.</p><p><figure style=flex-grow:139;flex-basis:334px><a href=/p/confetti-cleanup/confetti_orig_gc.png data-size=790x566><img src=/p/confetti-cleanup/confetti_orig_gc.png srcset="/p/confetti-cleanup/confetti_orig_gc_hud211dff1d456a7054d131c8d9ab2734a_68537_480x0_resize_box_3.png 480w, /p/confetti-cleanup/confetti_orig_gc_hud211dff1d456a7054d131c8d9ab2734a_68537_1024x0_resize_box_3.png 1024w" width=790 height=566 loading=lazy alt="Confetto in the bin"></a><figcaption>Confetto in the bin</figcaption></figure></p><p><figure style=flex-grow:809;flex-basis:1942px><a href=/p/confetti-cleanup/confetti_orig_objects.png data-size=1910x236><img src=/p/confetti-cleanup/confetti_orig_objects.png srcset="/p/confetti-cleanup/confetti_orig_objects_huc420aac9d5439e1ac074bb1a0d41fd43_89673_480x0_resize_box_3.png 480w, /p/confetti-cleanup/confetti_orig_objects_huc420aac9d5439e1ac074bb1a0d41fd43_89673_1024x0_resize_box_3.png 1024w" width=1910 height=236 loading=lazy alt="Allocated Confetto objects"></a><figcaption>Allocated Confetto objects</figcaption></figure></p><p>Fast forward to Dec 2021 and my friends over at Code with Italians built a similar <a class=link href="https://www.youtube.com/watch?v=FgZvs1BsAxE&t=1776s" target=_blank rel=noopener>snow modifier</a>. Revisiting my modifier, I cleaned it up. I managed to get rid of some of the object allocation. However since it is a particle system and each of the particles change position, it needs some form of state that changes as the position of the particles change. I used the <a class=link href=https://developer.android.com/reference/kotlin/androidx/compose/ui/geometry/Offset target=_blank rel=noopener>Offset class</a> as this is the object that a Circle needs to draw and the object has been optimised to pack the x and y floats. It also has some other useful functions and operators. Offset is immutable so if the particle changes position a new object is made. It is smaller than my original implementation. It isn&rsquo;t really fair to compare the screenshot below with the one above as the time over which the heap capture ran is is not the same. The shallow size of Offset is 16 and the shallow size of the original Confetto objects is 24 and the point inside the Confetto object also has a shallow size of 16. The improvements eliminated the allocation of the extra Confetto object.</p><p><figure style=flex-grow:953;flex-basis:2288px><a href=/p/confetti-cleanup/confetti_offset.png data-size=2002x210><img src=/p/confetti-cleanup/confetti_offset.png srcset="/p/confetti-cleanup/confetti_offset_hu1e94efaa125524bba702a210d1a78a62_80170_480x0_resize_box_3.png 480w, /p/confetti-cleanup/confetti_offset_hu1e94efaa125524bba702a210d1a78a62_80170_1024x0_resize_box_3.png 1024w" width=2002 height=210 loading=lazy alt="Confetti using offset"></a><figcaption>Confetti using offset</figcaption></figure></p><p>My intuition says it is preferable to sprinkle the memory with fewer smaller pieces of confetti rather than many larger ones. Still there isn&rsquo;t really a way around it since Offset is immutable and Compose is built around tracking unidirectional state flow. Mutable State holder classes won&rsquo;t register a change if the object that holds the state doesn&rsquo;t change. This means if I keep an object that holds the position of the particle and I simply change the x and y values in he mutable state holder will not register a change. <a class=link href=https://dev.to/zachklipp/two-mutables-dont-make-a-right-2kgp target=_blank rel=noopener>Here</a> is a detail discussion on mutable state.</p><h3 id=how-to-build-your-own-drawing-modifier>How to build your own drawing modifier</h3><p>You need a extension function on modifier like so-</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>fun</span> <span class=nf>Modifier</span><span class=p>.</span><span class=n>confetti</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=c1>// all your parameters to set up the modifier
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span> <span class=p>=</span> <span class=n>composed</span> <span class=p>{</span> <span class=c1>// the composed function gives you a composition on each composable where this modifier is used
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// remeber any state you need here
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>var</span> <span class=py>confettiState</span> <span class=k>by</span> <span class=n>remember</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>mutableStateOf</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>ConfettiState</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=c1>// parameters to setup the state
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>LaunchedEffect</span><span class=p>(</span><span class=n>isVisible</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=p>(</span><span class=n>isVisible</span> <span class=o>&amp;&amp;</span> <span class=n>isActive</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>withFrameMillis</span> <span class=p>{</span> <span class=n>newTick</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>                <span class=c1>// this side effect will return a tick every frame giving 
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>// the elapsed time since the previous frame
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>// This would be the place where you move the particles
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>onSizeChanged</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// do what you need to do if the size changes
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}.</span><span class=n>drawBehind</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// this is where you can draw behind what ever composable content. 
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// It proveds a drawScope with a canvas which you can use
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// e.g. loop through the particles and draw them
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Then it is as simple as adding the modifier to any composable, e.g. here is a black box with red <code>Hello World</code> and confetti behind.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=n>Box</span><span class=p>(</span><span class=n>modifier</span> <span class=p>=</span> <span class=n>Modifier</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>background</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>Black</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>fillMaxSize</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>confetti</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Text</span><span class=p>(</span><span class=s2>&#34;Hello World&#34;</span><span class=p>,</span> <span class=n>color</span> <span class=p>=</span> <span class=n>Color</span><span class=p>.</span><span class=n>Red</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p><figure style=flex-grow:118;flex-basis:285px><a href=/p/confetti-cleanup/confetti_preview.png data-size=706x594><img src=/p/confetti-cleanup/confetti_preview.png srcset="/p/confetti-cleanup/confetti_preview_huc6db0be8f95ea1daf120b863c44a916a_27496_480x0_resize_box_3.png 480w, /p/confetti-cleanup/confetti_preview_huc6db0be8f95ea1daf120b863c44a916a_27496_1024x0_resize_box_3.png 1024w" width=706 height=594 loading=lazy alt="Confetti preview"></a><figcaption>Confetti preview</figcaption></figure></p><p>The <a class=link href=https://gitlab.com/maiatoday/esw/-/blob/main/app/src/main/java/net/maiatoday/esw/ui/modifiers/ConfettiModifier.kt target=_blank rel=noopener>code for the cleaned up confetti modifier</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/code/>code</a>
<a href=/tags/compose/>compose</a>
<a href=/tags/animate/>animate</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>Related contents</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/p/welcome-you-are-visitor-number-12345/><div class=article-image><img src=/p/welcome-you-are-visitor-number-12345/visitorCounter.3d2d9bd34ee276e593bfbd8bac20b717_hu9d445d78dd9da3a596374f2fa2fb4085_20893_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-PS2b007iduWTv72LrCC3Fw=="></div><div class=article-details><h2 class=article-title>Welcome you are visitor number 12345</h2></div></a></article><article class=has-image><a href=/p/blink-like-its-1999/><div class=article-image><img src=/p/blink-like-its-1999/blinktag.1c48967e8fa7dc5db40905e9a2ad4fb6_hu911b4b0ed820cc14ee3b4798ba6cf98f_12657_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-HEiWfo+n3F20CQXpoq1Ptg=="></div><div class=article-details><h2 class=article-title>&lt;blink> like it's 1999</h2></div></a></article><article class=has-image><a href=/p/animating-rainbow-text/><div class=article-image><img src=/p/animating-rainbow-text/noDisco.556047072255aedff2dfb533e976c0f0_hua68bcb7d3448fc4e606dd0d887f39cde_62022_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-VWBHByJVrt/y37Uz6XbA8A=="></div><div class=article-details><h2 class=article-title>Animating Rainbow Text</h2></div></a></article><article class=has-image><a href=/p/random-animating-pie-button/><div class=article-image><img src=/p/random-animating-pie-button/randomPieBanner.29fe95f7221eace9f8cc95d555c09027_hu76771219303a90c57653dfce99bbed18_102409_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-Kf6V9yIerOn4zJXVVcCQJw=="></div><div class=article-details><h2 class=article-title>Random Animating Pie Button</h2></div></a></article><article class=has-image><a href=/p/hello8ball/><div class=article-image><img src=/p/hello8ball/Screenshot_1566145786.cd13379cd6981ced4531a306d9983947_hu9195e699ef81636f1d4bdadf0d3d2a3d_107429_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy data-key data-hash="md5-zRM3nNaYHO1FMaMG2Zg5Rw=="></div><div class=article-details><h2 class=article-title>Hello8Ball</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2012 -
2022 maiatoday</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.3.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>